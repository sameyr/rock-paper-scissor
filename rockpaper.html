<!Doctype html>
<html>
    <head>
        <title>RockPaperScissor</title>
   
    </head>    
    <body>
        <p>Rock Paper Scissor</p>
        <button onclick="
            comp_move = Math.random();
            compMove(comp_move);
            userMove = 'Rock';
            comparision(userMove, computerMove);
        "> Rock </button>
        <button onclick="
            comp_move = Math.random();
            compMove(comp_move);
            userMove = 'Paper';
            comparision(userMove, computerMove);
        "> Paper </button>
        <button onclick="
            comp_move = Math.random();
            compMove(comp_move);
            userMove = 'Scissor';
            comparision(userMove, computerMove);
        "> Scissor </button>

        <button onclick="
            score.wins = 0,
            score.loose = 0,
            score.ties = 0;
            localStorage.removeItem('Score')
            ">Reset Score</button>

        <script>
            const score = JSON.parse(localStorage.getItem('Score'))
                 || {wins : 0,
                    loose : 0,
                    ties : 0};


            /*same thing as above
            if (score === null){ 
                score = {
                    wins : 0,
                    loose : 0,
                    ties : 0
                };
            }*/

            
            
            function compMove(comp_move){
                if (comp_move > 0 && comp_move < 1/3){
                    computerMove = 'Rock';
                    
                }
                else if (comp_move > 1/3 && comp_move < 2/3){
                    computerMove = 'Paper';
                }
                else {
                    computerMove = 'Scissor';
                }
            }  
            
            function comparision(computerMove,userMove){
                if ((computerMove === 'Rock' && userMove === 'Rock') || (computerMove === 'Paper' && userMove === 'Paper') 
                ||(computerMove === 'Scissor' && userMove === 'Scissor')){
                    result = 'Tie'
                    score.ties +=1;
                }
                else if ((computerMove === 'Rock' && userMove === 'Paper')||(computerMove === 'Scissor' && userMove === 'Rock')
                ||(computerMove === 'Paper' && userMove === 'Scissor')){
                    result ='You loose';
                    score.loose +=1;
                }
                else if ((computerMove === 'Scissor' && userMove === 'Paper')||(computerMove === 'Rock' && userMove === 'Scissor')
                ||(computerMove === 'Paper' && userMove === 'Rock')){
                    result = 'You win';
                    score.wins +=1; 
                }


                /* JSON.stringfy() converts any variable into string
                localStorage stores values permanently*/
                localStorage.setItem('Score',JSON.stringify(score)); 


                alert (`
                        You Picked ${userMove}.
                        Computer picked ${computerMove}.
                        ${result}.
                        wins : ${score.wins} , loose: ${score.loose} , Tie : ${score.ties}`)
            }
        </script>
    </body>
</html>